<div th:fragment="course-outline(course, sections, selectedLesson, progress)">
    <div class="card p-3 mt-5">
        <h6>Plan du cours</h6>
        <div class="mb-2 text-muted small">
            <!-- <span th:text="${#numbers.sum(sections.^[#this.lessons != null].![#lists.size(lessons)])} + ' leçons'"></span> -->
            &nbsp;•&nbsp;
            <span>12 heures</span> <!-- À calculer côté Java si besoin -->
        </div>
        <div class="progress mb-3" style="height: 8px;">
            <div class="progress-bar bg-success" role="progressbar"
                 th:style="'width:' + ${progress} + '%;'"
                 th:text="${progress + '%'}"></div>
        </div>
        <div class="accordion" id="courseAccordion">
            <div th:each="section, secStat : ${sections}" class="accordion-item">
                <h2 class="accordion-header" th:attr="id='heading' + ${secStat.index}">
                    <button class="accordion-button collapsed" type="button"
                    data-bs-toggle="collapse"
                    th:attr="data-bs-target='#collapse' + ${secStat.index}"
                    aria-expanded="false">
                <span th:text="${section.title}">Titre de la section</span>
                <!-- <span class="ms-2 text-muted small" th:text="${#lists.size(section.lessons)} + ' leçons'"></span> -->
            </button>
                </h2>
                <div th:attr="id='collapse' + ${secStat.index}"
                     class="accordion-collapse collapse"
                     th:classappend="${secStat.index == 0} ? ' show' : ''"
                     data-bs-parent="#courseAccordion">
                    <div class="accordion-body p-0">
                        <ul class="list-group list-group-flush">
                            <li th:each="lesson : ${section.lessons}"
                                th:classappend="${selectedLesson != null and lesson.id == selectedLesson.id} ? 'active bg-light text-success' : ''"
                                class="list-group-item d-flex justify-content-between align-items-center">
                                <a th:href="@{/courses/{courseId}(courseId=${course.id}, lessonId=${lesson.id})}"
                                   class="text-decoration-none d-flex align-items-center w-100">
                                    <i class="bi bi-play-circle me-2"></i>
                                    <span th:text="${lesson.title}">Titre de la leçon</span>
                                    <span class="ms-auto text-muted small" th:text="${lesson.video != null ? lesson.video.duration : ''}"></span>
                                </a>
                            </li>
                      <!-- Boucle sur les quiz de la section -->
<li th:each="quiz : ${section.quizzes}"
class="list-group-item d-flex align-items-center bg-light">
<a th:href="@{/courses/{courseId}/lessons/{lessonId}/quiz(courseId=${course.id}, lessonId=${quiz.lesson.id})}"
   class="text-decoration-none d-flex align-items-center w-100">
    <i class="bi bi-question-circle me-2"></i>
    <span th:text="'Quiz: ' + ${quiz.title}">Quiz</span>
</a>
</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>